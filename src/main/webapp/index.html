<!DOCTYPE html>
<html lang="en" ng-app="refresh_div" >
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>Lojão Rio do Peixe - Termômetro de Vendas</title>

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">

        <!-- Bootstrap core CSS -->
        <link href="contents/css/bootstrap.min.css" rel="stylesheet">

        <!-- Material Design Bootstrap -->
        <link href="contents/css/mdb.min.css" rel="stylesheet">

        <!-- Your custom styles (optional) -->
        <link href="contents/css/style.css" rel="stylesheet">

        <!-- SCRIPTS -->

        <!-- JQuery -->
        <script type="text/javascript" src="contents/js/jquery-3.1.1.min.js"></script>

        <!-- Bootstrap tooltips -->
        <script type="text/javascript" src="contents/js/tether.min.js"></script>

        <!-- Bootstrap core JavaScript -->
        <script type="text/javascript" src="contents/js/bootstrap.min.js"></script>

        <!-- MDB core JavaScript -->
        <script type="text/javascript" src="contents/js/mdb.min.js"></script>

        <style>
            html {
                font-size: 93%;
            }
        </style>

        <script>
            $('#myModal').on('shown.bs.modal', function () {
                $('#myInput').focus()
            })
        </script>

    </head>
    <body ng-controller="refresh_control">

        <div id="preloader"></div>
        <div class="all">

            <nav class="navbar navbar-dark bg-primary" id="nav-blue">

                <div>
                    <a href="#!" class="navbar-brand"><img id="logo" src="contents/img/logolrp.svg" alt="Logo Lojao Rio do Peixe"></a>                
                    <ul class="nav navbar-nav">
                        <li class="nav-link text-xl-left"><h1 class="h1-responsive" id="titulo">Termômetro de Vendas</h1></li>
                        <li><a class="nav-link text-xl-right" data-toggle="modal" data-target="#myModal" href="#myModal">Sobre</a></li>
                    </ul>
                </div>

            </nav>

            <div class="container">

                <table class="table table-bordered table-sm">
                    <thead>
                        <tr>
                            <th class="text-lg-center" data-field="fl">FILIAL</th>
                            <th class="text-lg-center" data-field="flname">NOME FILIAL</th>
                            <th class="text-lg-center" data-field="brutepriceprod">VALOR BRUTO PRODUTOS</th>
                            <th class="text-lg-center" data-field="totalreturnedprod">TOTAL DEVOLVIDO PRODUTOS</th>
                            <th class="text-lg-center" data-field="brutepriceserv">VALOR BRUTO SERVIÇOS</th>
                            <th class="text-lg-center" data-field="canceledserv">SERVIÇOS CANCELADOS</th>
                            <th class="text-lg-center" data-field="tickettotal">TICKET MÉDIO TOTAL</th>
                            <th class="text-lg-center" data-field="sales">VENDA LÍQUIDA TOTAL</th>
                        </tr>
                    </thead>

                    <tbody ng-repeat="s in sales| orderBy: '-prodBalanceTotal + -servBalanceTotal' ">
                        <tr>
                            <td class="text-lg-center" style="color: #0059bc; font-weight: bold;">{{s.branchNumber}}</td>
                            <td class="text-lg-left" style="color: #0059bc; font-weight: bold;">{{s.trade}}</td>
                            <td class="text-lg-right" style="color: #0059bc; font-weight: bold;">{{s.prodSaleTotal| currency:""}}</td>
                            <td class="text-lg-right" style="color: red; font-weight: bold;">{{s.prodDevolutionTotal| currency:""}}</td>
                            <td class="text-lg-right" style="color: #0059bc; font-weight: bold;">{{s.servSaleTotal| currency:""}}</td>
                            <td class="text-lg-right" style="color: red; font-weight: bold;">{{s.servDevolutionTotal| currency:""}}</td>
                            <td class="text-lg-right" style="color: #0059bc; font-weight: bold;">{{s.servAverageTicket + s.prodAverageTicket| currency:""}}</td>
                            <td class="text-lg-right" style="color: #0059bc; font-weight: bold;">{{s.prodBalanceTotal + s.servBalanceTotal| currency:""}}</td>
                        </tr>  
                    </tbody>
                    <tbody class="total-style">
                        <tr>
                            <td class="text-lg-center">-</td>
                            <td class="text-lg-center">TOTAIS</td>
                            <td class="text-lg-right">{{calcProdSaleTotal() | currency:""}}</td>
                            <td class="text-lg-right">{{calcProdDevolutionTotal() | currency:""}}</td>
                            <td class="text-lg-right">{{calcTotalservTotalSale() | currency:""}}</td>
                            <td class="text-lg-right">{{calcTotalservTotalDevolution() | currency:""}}</td>
                            <td class="text-lg-right">{{calcTotalTicket() | currency:""}}</td>
                            <td class="text-lg-right">{{calcTotalSales() | currency:""}}</td>
                        </tr>
                    </tbody>
                </table>     
            </div>
        </div>

        <!-- Scripts -->           
        <script type="text/javascript" src="contents/js/angular.min.js"></script>
        <script type="text/javascript" src="contents/js/app.sales.js"></script>        
        <!-- <script type="text/javascript" src="contents/js/materialize.min.js"></script> -->
        <script type="text/javascript" src="contents/js/jquery-2.2.5-pre.min.js"></script>   
        <script type="text/javascript" src="contents/js/utils.js"></script>


        <!-- Modal -->
        <div class="modal fade bd-example-modal-sm" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog  modal-sm" role="document">
                <!--Content-->
                <div class="modal-content">
                    <!--Header-->
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title" id="myModalLabel">Termômetro de Vendas</h4>
                    </div>
                    <!--Body-->
                    <div class="modal-body">
                        <p class="text-fluid" style="font-size: 95.5%;">Termômetro de Vendas é um sistema de consultas de vendas em tempo real.<p>
                        <p class="text-fluid" style="font-size: 95.5%;">Licença: THE BEER-WARE LICENSE (Revision 42)</p>                        
                    </div>
                    <!--Footer-->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Fechar</button>                        
                    </div>
                </div>
                <!--/.Content-->
            </div>
        </div>
        <!-- /.Live preview-->        

    </body>
</html>
